<template name="organization">
  <div class="container">
    <h1>Welcome to {{name}}</h1>
    <table class="table needs-table">
      <tr>
        <td><h4>Title</h4></td>
        <td><h4>Needed</h4></td>
        <td><h4>Progress</h4></td>
      </tr>
      {{#each organizationNeeds name}}
          {{> organizationNeed}}
      {{/each}}
    </table>
    {{#if hasAccess}}
      <div>
        <form class="new-need need-form">
          <input type="text" name="what" placeholder="What do you need?" />
          <input type="text" name="amount" placeholder="How many?">
          <button type="submit" class="btn btn-success">Submit</button>
        </form>
      </div>
    {{/if}}
    </div>
</template>

<template name="organizationNeed">
  <tr class="need-row">
    <td>{{title}}</td>
    <td>{{needed}}</td>
    <td>
      <div class="progress">
        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{progress}}%">
        </div>
      </div>
    </td>
    <td>
      <button data-toggle="collapse" data-target="#{{_id}}" type="submit" class="btn btn-success">Donate</button>
    </td>
    {{#if hasAccess}}
      <td>
        <form class="new-delivery">
          <input type="text" name="amount" value=1>
          <button type="submit" class="btn btn-success">Delivered</button>
        </form>
      </td>
    {{/if}}
  </tr>
  <tr class="donate-row collapse out" id={{_id}}>
    <td>
      <form class="donation-form">
        <input type="text" name="name" placeholder="Your name">
        <input type="number" name="amount" placeholder="Amount">
        <input type="datetime" name="time" placeholder="When can you deliver?">
        <button type="submit" class="btn btn-primary">Save</button>
      </form>
    </td>
  </tr>
</template>
